name: workflow
on:
  push:
    paths-ignore:
      - 'last_zephyr_commit'
  schedule:
    - cron: '0 3 * * *'
  workflow_dispatch:
jobs:
  prepare-zephyr-0:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 0
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-0
  prepare-zephyr-1:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 1
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-1
  prepare-zephyr-2:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 2
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-2
  prepare-zephyr-3:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 3
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-3
  prepare-zephyr-4:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 4
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-4
  prepare-zephyr-5:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 5
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-5
  prepare-zephyr-6:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 6
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-6
  prepare-zephyr-7:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 7
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-7
  prepare-zephyr-8:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 8
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-8
  prepare-zephyr-9:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 9
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-9
  prepare-zephyr-10:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 10
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-10
  prepare-zephyr-11:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 11
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-11
  prepare-zephyr-12:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 12
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-12
  prepare-zephyr-13:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 13
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-13
  prepare-zephyr-14:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 14
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-14
  prepare-zephyr-15:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 15
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-15
  prepare-zephyr-16:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 16
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-16
  prepare-zephyr-17:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 17
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-17
  prepare-zephyr-18:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 18
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-18
  prepare-zephyr-19:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 19
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-19
  prepare-zephyr-20:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 20
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-20
  prepare-zephyr-21:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 21
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-21
  prepare-zephyr-22:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 22
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-22
  prepare-zephyr-23:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 23
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-23
  prepare-zephyr-24:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 24
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-24
  prepare-zephyr-25:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 25
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-25
  prepare-zephyr-26:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 26
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-26
  prepare-zephyr-27:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 27
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-27
  prepare-zephyr-28:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 28
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-28
  prepare-zephyr-29:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 29
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh zephyr.tar.gz job-artifacts/prepare-zephyr-29
  build-0-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-0-hello_world
  simulate-0-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-0-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-0-shell_module
  simulate-0-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-0-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-0-philosophers
  simulate-0-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-0-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-0-micropython
  simulate-0-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-0-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-0-tensorflow_lite_micro
  simulate-0-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 0
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-1-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-1-hello_world
  simulate-1-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-1-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-1-shell_module
  simulate-1-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-1-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-1-philosophers
  simulate-1-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-1-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-1-micropython
  simulate-1-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-1-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-1-tensorflow_lite_micro
  simulate-1-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 1
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-2-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-2-hello_world
  simulate-2-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-2-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-2-shell_module
  simulate-2-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-2-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-2-philosophers
  simulate-2-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-2-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-2-micropython
  simulate-2-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-2-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-2-tensorflow_lite_micro
  simulate-2-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 2
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-3-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-3-hello_world
  simulate-3-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-3-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-3-shell_module
  simulate-3-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-3-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-3-philosophers
  simulate-3-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-3-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-3-micropython
  simulate-3-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-3-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-3-tensorflow_lite_micro
  simulate-3-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 3
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-4-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-4-hello_world
  simulate-4-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-4-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-4-shell_module
  simulate-4-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-4-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-4-philosophers
  simulate-4-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-4-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-4-micropython
  simulate-4-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-4-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-4-tensorflow_lite_micro
  simulate-4-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 4
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-5-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-5-hello_world
  simulate-5-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-5-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-5-shell_module
  simulate-5-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-5-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-5-philosophers
  simulate-5-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-5-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-5-micropython
  simulate-5-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-5-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-5-tensorflow_lite_micro
  simulate-5-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 5
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-6-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-6-hello_world
  simulate-6-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-6-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-6-shell_module
  simulate-6-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-6-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-6-philosophers
  simulate-6-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-6-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-6-micropython
  simulate-6-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-6-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-6-tensorflow_lite_micro
  simulate-6-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 6
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-7-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-7-hello_world
  simulate-7-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-7-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-7-shell_module
  simulate-7-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-7-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-7-philosophers
  simulate-7-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-7-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-7-micropython
  simulate-7-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-7-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-7-tensorflow_lite_micro
  simulate-7-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 7
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-8-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-8-hello_world
  simulate-8-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-8-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-8-shell_module
  simulate-8-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-8-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-8-philosophers
  simulate-8-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-8-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-8-micropython
  simulate-8-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-8-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-8-tensorflow_lite_micro
  simulate-8-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 8
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-9-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-9-hello_world
  simulate-9-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-9-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-9-shell_module
  simulate-9-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-9-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-9-philosophers
  simulate-9-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-9-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-9-micropython
  simulate-9-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-9-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-9-tensorflow_lite_micro
  simulate-9-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 9
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-10-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-10-hello_world
  simulate-10-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-10-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-10-shell_module
  simulate-10-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-10-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-10-philosophers
  simulate-10-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-10-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-10-micropython
  simulate-10-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-10-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-10-tensorflow_lite_micro
  simulate-10-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 10
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-11-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-11-hello_world
  simulate-11-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-11-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-11-shell_module
  simulate-11-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-11-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-11-philosophers
  simulate-11-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-11-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-11-micropython
  simulate-11-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-11-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-11-tensorflow_lite_micro
  simulate-11-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 11
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-12-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-12-hello_world
  simulate-12-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-12-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-12-shell_module
  simulate-12-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-12-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-12-philosophers
  simulate-12-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-12-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-12-micropython
  simulate-12-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-12-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-12-tensorflow_lite_micro
  simulate-12-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 12
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-13-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-13-hello_world
  simulate-13-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-13-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-13-shell_module
  simulate-13-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-13-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-13-philosophers
  simulate-13-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-13-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-13-micropython
  simulate-13-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-13-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-13-tensorflow_lite_micro
  simulate-13-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 13
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-14-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-14-hello_world
  simulate-14-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-14-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-14-shell_module
  simulate-14-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-14-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-14-philosophers
  simulate-14-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-14-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-14-micropython
  simulate-14-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-14-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-14-tensorflow_lite_micro
  simulate-14-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 14
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-15-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-15-hello_world
  simulate-15-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-15-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-15-shell_module
  simulate-15-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-15-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-15-philosophers
  simulate-15-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-15-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-15-micropython
  simulate-15-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-15-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-15-tensorflow_lite_micro
  simulate-15-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 15
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-16-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-16-hello_world
  simulate-16-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-16-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-16-shell_module
  simulate-16-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-16-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-16-philosophers
  simulate-16-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-16-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-16-micropython
  simulate-16-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-16-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-16-tensorflow_lite_micro
  simulate-16-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 16
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-17-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-17-hello_world
  simulate-17-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-17-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-17-shell_module
  simulate-17-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-17-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-17-philosophers
  simulate-17-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-17-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-17-micropython
  simulate-17-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-17-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-17-tensorflow_lite_micro
  simulate-17-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 17
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-18-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-18-hello_world
  simulate-18-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-18-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-18-shell_module
  simulate-18-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-18-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-18-philosophers
  simulate-18-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-18-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-18-micropython
  simulate-18-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-18-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-18-tensorflow_lite_micro
  simulate-18-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 18
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-19-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-19-hello_world
  simulate-19-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-19-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-19-shell_module
  simulate-19-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-19-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-19-philosophers
  simulate-19-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-19-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-19-micropython
  simulate-19-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-19-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-19-tensorflow_lite_micro
  simulate-19-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 19
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-20-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-20-hello_world
  simulate-20-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-20-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-20-shell_module
  simulate-20-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-20-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-20-philosophers
  simulate-20-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-20-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-20-micropython
  simulate-20-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-20-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-20-tensorflow_lite_micro
  simulate-20-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 20
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-21-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-21-hello_world
  simulate-21-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-21-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-21-shell_module
  simulate-21-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-21-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-21-philosophers
  simulate-21-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-21-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-21-micropython
  simulate-21-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-21-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-21-tensorflow_lite_micro
  simulate-21-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 21
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-22-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-22-hello_world
  simulate-22-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-22-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-22-shell_module
  simulate-22-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-22-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-22-philosophers
  simulate-22-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-22-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-22-micropython
  simulate-22-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-22-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-22-tensorflow_lite_micro
  simulate-22-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 22
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-23-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-23-hello_world
  simulate-23-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-23-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-23-shell_module
  simulate-23-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-23-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-23-philosophers
  simulate-23-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-23-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-23-micropython
  simulate-23-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-23-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-23-tensorflow_lite_micro
  simulate-23-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 23
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-24-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-24-hello_world
  simulate-24-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-24-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-24-shell_module
  simulate-24-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-24-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-24-philosophers
  simulate-24-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-24-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-24-micropython
  simulate-24-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-24-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-24-tensorflow_lite_micro
  simulate-24-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 24
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-25-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-25-hello_world
  simulate-25-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-25-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-25-shell_module
  simulate-25-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-25-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-25-philosophers
  simulate-25-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-25-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-25-micropython
  simulate-25-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-25-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-25-tensorflow_lite_micro
  simulate-25-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 25
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-26-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-26-hello_world
  simulate-26-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-26-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-26-shell_module
  simulate-26-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-26-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-26-philosophers
  simulate-26-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-26-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-26-micropython
  simulate-26-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-26-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-26-tensorflow_lite_micro
  simulate-26-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 26
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-27-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-27-hello_world
  simulate-27-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-27-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-27-shell_module
  simulate-27-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-27-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-27-philosophers
  simulate-27-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-27-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-27-micropython
  simulate-27-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-27-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-27-tensorflow_lite_micro
  simulate-27-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 27
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-28-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-28-hello_world
  simulate-28-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-28-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-28-shell_module
  simulate-28-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-28-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-28-philosophers
  simulate-28-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-28-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-28-micropython
  simulate-28-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-28-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-28-tensorflow_lite_micro
  simulate-28-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 28
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-29-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-29-hello_world
  simulate-29-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-hello_world/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-29-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-29-shell_module
  simulate-29-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-shell_module/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-29-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-29-philosophers
  simulate-29-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-philosophers/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-29-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-29-micropython
  simulate-29-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-micropython/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  build-29-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get Zephyr
      if: env.SKIP != 'true'
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      if: env.SKIP != 'true'
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      if: env.SKIP != 'true'
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      if: env.SKIP != 'true'
      run: ./scripts/build.py
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ job-artifacts/build-29-tensorflow_lite_micro
  simulate-29-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Check for skip
      run: ./scripts/check_for_skip.sh 29
    - name: Get artifacts
      if: env.SKIP != 'true'
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      if: env.SKIP != 'true'
      run: ./scripts/download_renode.sh
    - name: Simulate
      if: env.SKIP != 'true'
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      if: env.SKIP != 'true'
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      if: env.SKIP != 'true'
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      if: env.SKIP != 'true'
      run: ./scripts/save_artifacts.sh artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
  results:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [simulate-0-hello_world, simulate-0-shell_module, simulate-0-philosophers, simulate-0-micropython, simulate-0-tensorflow_lite_micro, simulate-1-hello_world, simulate-1-shell_module, simulate-1-philosophers, simulate-1-micropython, simulate-1-tensorflow_lite_micro, simulate-2-hello_world, simulate-2-shell_module, simulate-2-philosophers, simulate-2-micropython, simulate-2-tensorflow_lite_micro, simulate-3-hello_world, simulate-3-shell_module, simulate-3-philosophers, simulate-3-micropython, simulate-3-tensorflow_lite_micro, simulate-4-hello_world, simulate-4-shell_module, simulate-4-philosophers, simulate-4-micropython, simulate-4-tensorflow_lite_micro, simulate-5-hello_world, simulate-5-shell_module, simulate-5-philosophers, simulate-5-micropython, simulate-5-tensorflow_lite_micro, simulate-6-hello_world, simulate-6-shell_module, simulate-6-philosophers, simulate-6-micropython, simulate-6-tensorflow_lite_micro, simulate-7-hello_world, simulate-7-shell_module, simulate-7-philosophers, simulate-7-micropython, simulate-7-tensorflow_lite_micro, simulate-8-hello_world, simulate-8-shell_module, simulate-8-philosophers, simulate-8-micropython, simulate-8-tensorflow_lite_micro, simulate-9-hello_world, simulate-9-shell_module, simulate-9-philosophers, simulate-9-micropython, simulate-9-tensorflow_lite_micro, simulate-10-hello_world, simulate-10-shell_module, simulate-10-philosophers, simulate-10-micropython, simulate-10-tensorflow_lite_micro, simulate-11-hello_world, simulate-11-shell_module, simulate-11-philosophers, simulate-11-micropython, simulate-11-tensorflow_lite_micro, simulate-12-hello_world, simulate-12-shell_module, simulate-12-philosophers, simulate-12-micropython, simulate-12-tensorflow_lite_micro, simulate-13-hello_world, simulate-13-shell_module, simulate-13-philosophers, simulate-13-micropython, simulate-13-tensorflow_lite_micro, simulate-14-hello_world, simulate-14-shell_module, simulate-14-philosophers, simulate-14-micropython, simulate-14-tensorflow_lite_micro, simulate-15-hello_world, simulate-15-shell_module, simulate-15-philosophers, simulate-15-micropython, simulate-15-tensorflow_lite_micro, simulate-16-hello_world, simulate-16-shell_module, simulate-16-philosophers, simulate-16-micropython, simulate-16-tensorflow_lite_micro, simulate-17-hello_world, simulate-17-shell_module, simulate-17-philosophers, simulate-17-micropython, simulate-17-tensorflow_lite_micro, simulate-18-hello_world, simulate-18-shell_module, simulate-18-philosophers, simulate-18-micropython, simulate-18-tensorflow_lite_micro, simulate-19-hello_world, simulate-19-shell_module, simulate-19-philosophers, simulate-19-micropython, simulate-19-tensorflow_lite_micro, simulate-20-hello_world, simulate-20-shell_module, simulate-20-philosophers, simulate-20-micropython, simulate-20-tensorflow_lite_micro, simulate-21-hello_world, simulate-21-shell_module, simulate-21-philosophers, simulate-21-micropython, simulate-21-tensorflow_lite_micro, simulate-22-hello_world, simulate-22-shell_module, simulate-22-philosophers, simulate-22-micropython, simulate-22-tensorflow_lite_micro, simulate-23-hello_world, simulate-23-shell_module, simulate-23-philosophers, simulate-23-micropython, simulate-23-tensorflow_lite_micro, simulate-24-hello_world, simulate-24-shell_module, simulate-24-philosophers, simulate-24-micropython, simulate-24-tensorflow_lite_micro, simulate-25-hello_world, simulate-25-shell_module, simulate-25-philosophers, simulate-25-micropython, simulate-25-tensorflow_lite_micro, simulate-26-hello_world, simulate-26-shell_module, simulate-26-philosophers, simulate-26-micropython, simulate-26-tensorflow_lite_micro, simulate-27-hello_world, simulate-27-shell_module, simulate-27-philosophers, simulate-27-micropython, simulate-27-tensorflow_lite_micro, simulate-28-hello_world, simulate-28-shell_module, simulate-28-philosophers, simulate-28-micropython, simulate-28-tensorflow_lite_micro, simulate-29-hello_world, simulate-29-shell_module, simulate-29-philosophers, simulate-29-micropython, simulate-29-tensorflow_lite_micro]
    env:
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    if: always()
    steps:
    - uses: actions/checkout@v2
    - name: Install gcp
      run: ./scripts/prepare_gcp.sh
    - name: Delete artifacts
      run: ./scripts/delete_artifacts.sh
    - name: Update latest Zephyr commit
      id: update-last-zephyr-commit
      run: |
        ./scripts/save_commit.sh ${{ needs.simulate-0-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }}
        echo "::set-output name=LAST_ZEPHYR_COMMIT::$(cat last_zephyr_commit)"
    - name: Commit latest Zephyr commit
      uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: Update latest Zephyr commit ${{ steps.update-last-zephyr-commit.outputs.LAST_ZEPHYR_COMMIT }}
        file_pattern: last_zephyr_commit
