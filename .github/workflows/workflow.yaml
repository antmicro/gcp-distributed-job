name: workflow
on:
  push:
    paths-ignore:
      - 'last_zephyr_commit'
  schedule:
    - cron: '0 3 * * *'
  workflow_dispatch:
jobs:
  prepare-zephyr-0:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 0
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-0
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-0/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-1:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 1
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-1
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-1/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-2:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 2
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-2
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-2/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-3:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 3
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-3
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-3/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-4:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 4
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-4
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-4/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-5:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 5
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-5
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-5/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-6:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 6
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-6
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-6/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-7:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 7
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-7
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-7/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-8:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 8
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-8
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-8/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-9:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 9
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-9
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-9/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-10:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 10
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-10
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-10/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-11:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 11
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-11
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-11/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-12:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 12
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-12
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-12/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-13:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 13
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-13
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-13/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-14:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 14
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-14
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-14/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-15:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 15
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-15
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-15/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-16:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 16
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-16
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-16/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-17:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 17
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-17
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-17/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-18:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 18
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-18
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-18/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-19:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 19
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-19
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-19/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-20:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 20
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-20
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-20/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-21:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 21
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-21
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-21/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-22:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 22
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-22
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-22/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-23:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 23
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-23
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-23/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-24:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 24
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-24
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-24/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-25:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 25
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-25
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-25/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-26:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 26
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-26
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-26/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-27:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 27
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-27
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-27/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-28:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 28
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-28
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-28/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  prepare-zephyr-29:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    env:
      ZEPHYR_COMMIT: 29
      ZEPHYR_SDK_VERSION: 0.15.0
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_prepare.sh
    - name: Download Zephyr
      run: ./scripts/download_zephyr.sh
    - name: Pass Zephyr as artifact
      run: |
        mkdir -p job-artifacts/prepare-zephyr-29
        mv zephyr.tar.gz job-artifacts/prepare-zephyr-29/
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  build-0-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-0-hello_world
        mv artifacts/ job-artifacts/build-0-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-0-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-0-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-0-shell_module
        mv artifacts/ job-artifacts/build-0-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-0-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-0-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-0-philosophers
        mv artifacts/ job-artifacts/build-0-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-0-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-0-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-0-micropython
        mv artifacts/ job-artifacts/build-0-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-0-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-0-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-0]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-0/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-0-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-0-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-0-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-0-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-0-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-1-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-1-hello_world
        mv artifacts/ job-artifacts/build-1-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-1-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-1-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-1-shell_module
        mv artifacts/ job-artifacts/build-1-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-1-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-1-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-1-philosophers
        mv artifacts/ job-artifacts/build-1-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-1-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-1-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-1-micropython
        mv artifacts/ job-artifacts/build-1-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-1-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-1-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-1]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-1/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-1-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-1-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-1-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-1-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-1-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-2-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-2-hello_world
        mv artifacts/ job-artifacts/build-2-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-2-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-2-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-2-shell_module
        mv artifacts/ job-artifacts/build-2-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-2-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-2-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-2-philosophers
        mv artifacts/ job-artifacts/build-2-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-2-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-2-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-2-micropython
        mv artifacts/ job-artifacts/build-2-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-2-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-2-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-2]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-2/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-2-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-2-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-2-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-2-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-2-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-3-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-3-hello_world
        mv artifacts/ job-artifacts/build-3-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-3-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-3-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-3-shell_module
        mv artifacts/ job-artifacts/build-3-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-3-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-3-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-3-philosophers
        mv artifacts/ job-artifacts/build-3-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-3-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-3-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-3-micropython
        mv artifacts/ job-artifacts/build-3-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-3-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-3-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-3]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-3/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-3-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-3-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-3-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-3-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-3-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-4-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-4-hello_world
        mv artifacts/ job-artifacts/build-4-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-4-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-4-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-4-shell_module
        mv artifacts/ job-artifacts/build-4-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-4-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-4-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-4-philosophers
        mv artifacts/ job-artifacts/build-4-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-4-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-4-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-4-micropython
        mv artifacts/ job-artifacts/build-4-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-4-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-4-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-4]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-4/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-4-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-4-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-4-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-4-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-4-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-5-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-5-hello_world
        mv artifacts/ job-artifacts/build-5-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-5-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-5-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-5-shell_module
        mv artifacts/ job-artifacts/build-5-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-5-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-5-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-5-philosophers
        mv artifacts/ job-artifacts/build-5-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-5-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-5-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-5-micropython
        mv artifacts/ job-artifacts/build-5-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-5-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-5-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-5]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-5/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-5-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-5-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-5-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-5-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-5-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-6-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-6-hello_world
        mv artifacts/ job-artifacts/build-6-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-6-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-6-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-6-shell_module
        mv artifacts/ job-artifacts/build-6-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-6-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-6-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-6-philosophers
        mv artifacts/ job-artifacts/build-6-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-6-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-6-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-6-micropython
        mv artifacts/ job-artifacts/build-6-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-6-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-6-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-6]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-6/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-6-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-6-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-6-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-6-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-6-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-7-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-7-hello_world
        mv artifacts/ job-artifacts/build-7-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-7-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-7-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-7-shell_module
        mv artifacts/ job-artifacts/build-7-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-7-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-7-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-7-philosophers
        mv artifacts/ job-artifacts/build-7-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-7-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-7-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-7-micropython
        mv artifacts/ job-artifacts/build-7-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-7-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-7-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-7]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-7/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-7-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-7-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-7-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-7-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-7-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-8-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-8-hello_world
        mv artifacts/ job-artifacts/build-8-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-8-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-8-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-8-shell_module
        mv artifacts/ job-artifacts/build-8-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-8-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-8-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-8-philosophers
        mv artifacts/ job-artifacts/build-8-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-8-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-8-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-8-micropython
        mv artifacts/ job-artifacts/build-8-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-8-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-8-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-8]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-8/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-8-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-8-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-8-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-8-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-8-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-9-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-9-hello_world
        mv artifacts/ job-artifacts/build-9-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-9-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-9-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-9-shell_module
        mv artifacts/ job-artifacts/build-9-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-9-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-9-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-9-philosophers
        mv artifacts/ job-artifacts/build-9-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-9-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-9-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-9-micropython
        mv artifacts/ job-artifacts/build-9-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-9-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-9-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-9]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-9/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-9-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-9-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-9-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-9-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-9-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-10-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-10-hello_world
        mv artifacts/ job-artifacts/build-10-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-10-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-10-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-10-shell_module
        mv artifacts/ job-artifacts/build-10-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-10-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-10-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-10-philosophers
        mv artifacts/ job-artifacts/build-10-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-10-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-10-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-10-micropython
        mv artifacts/ job-artifacts/build-10-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-10-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-10-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-10]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-10/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-10-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-10-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-10-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-10-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-10-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-11-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-11-hello_world
        mv artifacts/ job-artifacts/build-11-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-11-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-11-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-11-shell_module
        mv artifacts/ job-artifacts/build-11-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-11-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-11-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-11-philosophers
        mv artifacts/ job-artifacts/build-11-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-11-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-11-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-11-micropython
        mv artifacts/ job-artifacts/build-11-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-11-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-11-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-11]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-11/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-11-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-11-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-11-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-11-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-11-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-12-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-12-hello_world
        mv artifacts/ job-artifacts/build-12-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-12-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-12-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-12-shell_module
        mv artifacts/ job-artifacts/build-12-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-12-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-12-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-12-philosophers
        mv artifacts/ job-artifacts/build-12-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-12-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-12-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-12-micropython
        mv artifacts/ job-artifacts/build-12-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-12-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-12-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-12]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-12/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-12-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-12-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-12-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-12-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-12-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-13-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-13-hello_world
        mv artifacts/ job-artifacts/build-13-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-13-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-13-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-13-shell_module
        mv artifacts/ job-artifacts/build-13-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-13-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-13-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-13-philosophers
        mv artifacts/ job-artifacts/build-13-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-13-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-13-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-13-micropython
        mv artifacts/ job-artifacts/build-13-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-13-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-13-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-13]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-13/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-13-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-13-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-13-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-13-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-13-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-14-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-14-hello_world
        mv artifacts/ job-artifacts/build-14-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-14-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-14-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-14-shell_module
        mv artifacts/ job-artifacts/build-14-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-14-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-14-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-14-philosophers
        mv artifacts/ job-artifacts/build-14-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-14-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-14-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-14-micropython
        mv artifacts/ job-artifacts/build-14-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-14-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-14-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-14]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-14/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-14-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-14-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-14-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-14-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-14-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-15-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-15-hello_world
        mv artifacts/ job-artifacts/build-15-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-15-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-15-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-15-shell_module
        mv artifacts/ job-artifacts/build-15-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-15-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-15-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-15-philosophers
        mv artifacts/ job-artifacts/build-15-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-15-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-15-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-15-micropython
        mv artifacts/ job-artifacts/build-15-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-15-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-15-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-15]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-15/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-15-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-15-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-15-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-15-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-15-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-16-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-16-hello_world
        mv artifacts/ job-artifacts/build-16-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-16-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-16-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-16-shell_module
        mv artifacts/ job-artifacts/build-16-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-16-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-16-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-16-philosophers
        mv artifacts/ job-artifacts/build-16-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-16-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-16-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-16-micropython
        mv artifacts/ job-artifacts/build-16-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-16-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-16-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-16]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-16/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-16-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-16-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-16-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-16-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-16-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-17-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-17-hello_world
        mv artifacts/ job-artifacts/build-17-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-17-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-17-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-17-shell_module
        mv artifacts/ job-artifacts/build-17-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-17-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-17-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-17-philosophers
        mv artifacts/ job-artifacts/build-17-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-17-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-17-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-17-micropython
        mv artifacts/ job-artifacts/build-17-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-17-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-17-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-17]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-17/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-17-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-17-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-17-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-17-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-17-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-18-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-18-hello_world
        mv artifacts/ job-artifacts/build-18-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-18-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-18-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-18-shell_module
        mv artifacts/ job-artifacts/build-18-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-18-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-18-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-18-philosophers
        mv artifacts/ job-artifacts/build-18-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-18-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-18-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-18-micropython
        mv artifacts/ job-artifacts/build-18-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-18-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-18-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-18]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-18/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-18-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-18-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-18-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-18-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-18-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-19-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-19-hello_world
        mv artifacts/ job-artifacts/build-19-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-19-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-19-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-19-shell_module
        mv artifacts/ job-artifacts/build-19-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-19-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-19-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-19-philosophers
        mv artifacts/ job-artifacts/build-19-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-19-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-19-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-19-micropython
        mv artifacts/ job-artifacts/build-19-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-19-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-19-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-19]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-19/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-19-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-19-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-19-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-19-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-19-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-20-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-20-hello_world
        mv artifacts/ job-artifacts/build-20-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-20-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-20-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-20-shell_module
        mv artifacts/ job-artifacts/build-20-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-20-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-20-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-20-philosophers
        mv artifacts/ job-artifacts/build-20-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-20-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-20-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-20-micropython
        mv artifacts/ job-artifacts/build-20-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-20-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-20-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-20]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-20/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-20-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-20-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-20-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-20-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-20-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-21-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-21-hello_world
        mv artifacts/ job-artifacts/build-21-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-21-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-21-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-21-shell_module
        mv artifacts/ job-artifacts/build-21-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-21-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-21-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-21-philosophers
        mv artifacts/ job-artifacts/build-21-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-21-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-21-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-21-micropython
        mv artifacts/ job-artifacts/build-21-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-21-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-21-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-21]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-21/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-21-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-21-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-21-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-21-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-21-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-22-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-22-hello_world
        mv artifacts/ job-artifacts/build-22-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-22-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-22-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-22-shell_module
        mv artifacts/ job-artifacts/build-22-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-22-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-22-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-22-philosophers
        mv artifacts/ job-artifacts/build-22-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-22-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-22-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-22-micropython
        mv artifacts/ job-artifacts/build-22-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-22-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-22-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-22]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-22/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-22-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-22-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-22-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-22-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-22-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-23-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-23-hello_world
        mv artifacts/ job-artifacts/build-23-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-23-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-23-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-23-shell_module
        mv artifacts/ job-artifacts/build-23-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-23-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-23-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-23-philosophers
        mv artifacts/ job-artifacts/build-23-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-23-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-23-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-23-micropython
        mv artifacts/ job-artifacts/build-23-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-23-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-23-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-23]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-23/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-23-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-23-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-23-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-23-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-23-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-24-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-24-hello_world
        mv artifacts/ job-artifacts/build-24-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-24-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-24-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-24-shell_module
        mv artifacts/ job-artifacts/build-24-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-24-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-24-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-24-philosophers
        mv artifacts/ job-artifacts/build-24-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-24-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-24-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-24-micropython
        mv artifacts/ job-artifacts/build-24-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-24-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-24-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-24]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-24/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-24-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-24-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-24-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-24-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-24-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-25-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-25-hello_world
        mv artifacts/ job-artifacts/build-25-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-25-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-25-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-25-shell_module
        mv artifacts/ job-artifacts/build-25-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-25-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-25-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-25-philosophers
        mv artifacts/ job-artifacts/build-25-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-25-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-25-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-25-micropython
        mv artifacts/ job-artifacts/build-25-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-25-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-25-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-25]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-25/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-25-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-25-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-25-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-25-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-25-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-26-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-26-hello_world
        mv artifacts/ job-artifacts/build-26-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-26-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-26-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-26-shell_module
        mv artifacts/ job-artifacts/build-26-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-26-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-26-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-26-philosophers
        mv artifacts/ job-artifacts/build-26-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-26-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-26-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-26-micropython
        mv artifacts/ job-artifacts/build-26-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-26-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-26-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-26]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-26/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-26-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-26-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-26-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-26-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-26-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-27-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-27-hello_world
        mv artifacts/ job-artifacts/build-27-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-27-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-27-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-27-shell_module
        mv artifacts/ job-artifacts/build-27-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-27-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-27-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-27-philosophers
        mv artifacts/ job-artifacts/build-27-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-27-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-27-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-27-micropython
        mv artifacts/ job-artifacts/build-27-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-27-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-27-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-27]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-27/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-27-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-27-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-27-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-27-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-27-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-28-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-28-hello_world
        mv artifacts/ job-artifacts/build-28-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-28-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-28-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-28-shell_module
        mv artifacts/ job-artifacts/build-28-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-28-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-28-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-28-philosophers
        mv artifacts/ job-artifacts/build-28-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-28-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-28-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-28-micropython
        mv artifacts/ job-artifacts/build-28-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-28-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-28-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-28]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-28/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-28-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-28-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-28-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-28-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-28-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-29-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: hello_world
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-29-hello_world
        mv artifacts/ job-artifacts/build-29-hello_world
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-29-hello_world:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-hello_world]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: hello_world
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-hello_world/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-29-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: shell_module
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-29-shell_module
        mv artifacts/ job-artifacts/build-29-shell_module
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-29-shell_module:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-shell_module]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: shell_module
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-shell_module/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-29-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: philosophers
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-29-philosophers
        mv artifacts/ job-artifacts/build-29-philosophers
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-29-philosophers:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-philosophers]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: philosophers
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-philosophers/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-29-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: micropython
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-29-micropython
        mv artifacts/ job-artifacts/build-29-micropython
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-29-micropython:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-micropython]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: micropython
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-micropython/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  build-29-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [prepare-zephyr-29]
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      MICROPYTHON_VERSION: 97a7cc243b
      NUMBER_OF_THREADS: 32
      GHA_MACHINE_TYPE: "n2-standard-32"
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_build.sh
    - name: Get Zephyr
      run: gsutil cp gs://gcp-distributed-job-test-bucket/job-artifacts/prepare-zephyr-29/zephyr.tar.gz .
    - name: Prepare Zephyr
      run: ./scripts/prepare_zephyr.sh
    - name: Prepare Micropython
      run: ./scripts/prepare_micropython.sh
    - name: Build boards
      run: ./scripts/build.py
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mkdir -p job-artifacts/build-29-tensorflow_lite_micro
        mv artifacts/ job-artifacts/build-29-tensorflow_lite_micro
        gsutil -m cp -r job-artifacts/ gs://gcp-distributed-job-test-bucket
  simulate-29-tensorflow_lite_micro:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [build-29-tensorflow_lite_micro]
    outputs:
      ZEPHYR_COMMIT: ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
    env:
      SAMPLE_NAME: tensorflow_lite_micro
      RENODE_VERSION: 1.13.1+20220909git3e7a1aa7
      NUMBER_OF_THREADS: 28
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      GHA_MACHINE_TYPE: "n2-standard-32"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    steps:
    - uses: actions/checkout@v2
    - name: Prepare environment
      run: ./scripts/environment_simulate.sh
    - name: Get artifacts
      run: gsutil -m cp -r gs://gcp-distributed-job-test-bucket/job-artifacts/build-29-tensorflow_lite_micro/artifacts .
    - name: Prepare Renode
      run: ./scripts/download_renode.sh
    - name: Simulate
      run: ./scripts/simulate.py
    - name: Get Zephyr commit
      id: get-zephyr-commit
      run: |
        ZEPHYR_COMMIT=$(cat artifacts/zephyr.version)
        echo "::set-output name=ZEPHYR_COMMIT::$ZEPHYR_COMMIT"
    - name: Upload load graphs
      uses: actions/upload-artifact@v2
      with:
        name: plots
        path: |
          **/plot_*.svg
    - name: Upload artifacts
      run: |
        mv artifacts/ ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }}
        gsutil -m cp -r ${{ steps.get-zephyr-commit.outputs.ZEPHYR_COMMIT }} gs://gcp-distributed-job-test-bucket
  results:
    container: ubuntu:jammy
    runs-on: [self-hosted, Linux, X64]
    needs: [simulate-0-hello_world, simulate-0-shell_module, simulate-0-philosophers, simulate-0-micropython, simulate-0-tensorflow_lite_micro, simulate-1-hello_world, simulate-1-shell_module, simulate-1-philosophers, simulate-1-micropython, simulate-1-tensorflow_lite_micro, simulate-2-hello_world, simulate-2-shell_module, simulate-2-philosophers, simulate-2-micropython, simulate-2-tensorflow_lite_micro, simulate-3-hello_world, simulate-3-shell_module, simulate-3-philosophers, simulate-3-micropython, simulate-3-tensorflow_lite_micro, simulate-4-hello_world, simulate-4-shell_module, simulate-4-philosophers, simulate-4-micropython, simulate-4-tensorflow_lite_micro, simulate-5-hello_world, simulate-5-shell_module, simulate-5-philosophers, simulate-5-micropython, simulate-5-tensorflow_lite_micro, simulate-6-hello_world, simulate-6-shell_module, simulate-6-philosophers, simulate-6-micropython, simulate-6-tensorflow_lite_micro, simulate-7-hello_world, simulate-7-shell_module, simulate-7-philosophers, simulate-7-micropython, simulate-7-tensorflow_lite_micro, simulate-8-hello_world, simulate-8-shell_module, simulate-8-philosophers, simulate-8-micropython, simulate-8-tensorflow_lite_micro, simulate-9-hello_world, simulate-9-shell_module, simulate-9-philosophers, simulate-9-micropython, simulate-9-tensorflow_lite_micro, simulate-10-hello_world, simulate-10-shell_module, simulate-10-philosophers, simulate-10-micropython, simulate-10-tensorflow_lite_micro, simulate-11-hello_world, simulate-11-shell_module, simulate-11-philosophers, simulate-11-micropython, simulate-11-tensorflow_lite_micro, simulate-12-hello_world, simulate-12-shell_module, simulate-12-philosophers, simulate-12-micropython, simulate-12-tensorflow_lite_micro, simulate-13-hello_world, simulate-13-shell_module, simulate-13-philosophers, simulate-13-micropython, simulate-13-tensorflow_lite_micro, simulate-14-hello_world, simulate-14-shell_module, simulate-14-philosophers, simulate-14-micropython, simulate-14-tensorflow_lite_micro, simulate-15-hello_world, simulate-15-shell_module, simulate-15-philosophers, simulate-15-micropython, simulate-15-tensorflow_lite_micro, simulate-16-hello_world, simulate-16-shell_module, simulate-16-philosophers, simulate-16-micropython, simulate-16-tensorflow_lite_micro, simulate-17-hello_world, simulate-17-shell_module, simulate-17-philosophers, simulate-17-micropython, simulate-17-tensorflow_lite_micro, simulate-18-hello_world, simulate-18-shell_module, simulate-18-philosophers, simulate-18-micropython, simulate-18-tensorflow_lite_micro, simulate-19-hello_world, simulate-19-shell_module, simulate-19-philosophers, simulate-19-micropython, simulate-19-tensorflow_lite_micro, simulate-20-hello_world, simulate-20-shell_module, simulate-20-philosophers, simulate-20-micropython, simulate-20-tensorflow_lite_micro, simulate-21-hello_world, simulate-21-shell_module, simulate-21-philosophers, simulate-21-micropython, simulate-21-tensorflow_lite_micro, simulate-22-hello_world, simulate-22-shell_module, simulate-22-philosophers, simulate-22-micropython, simulate-22-tensorflow_lite_micro, simulate-23-hello_world, simulate-23-shell_module, simulate-23-philosophers, simulate-23-micropython, simulate-23-tensorflow_lite_micro, simulate-24-hello_world, simulate-24-shell_module, simulate-24-philosophers, simulate-24-micropython, simulate-24-tensorflow_lite_micro, simulate-25-hello_world, simulate-25-shell_module, simulate-25-philosophers, simulate-25-micropython, simulate-25-tensorflow_lite_micro, simulate-26-hello_world, simulate-26-shell_module, simulate-26-philosophers, simulate-26-micropython, simulate-26-tensorflow_lite_micro, simulate-27-hello_world, simulate-27-shell_module, simulate-27-philosophers, simulate-27-micropython, simulate-27-tensorflow_lite_micro, simulate-28-hello_world, simulate-28-shell_module, simulate-28-philosophers, simulate-28-micropython, simulate-28-tensorflow_lite_micro, simulate-29-hello_world, simulate-29-shell_module, simulate-29-philosophers, simulate-29-micropython, simulate-29-tensorflow_lite_micro]
    env:
      GHA_SA: "gh-sa-gcp-distributed-job-buck"
      DEBIAN_FRONTEND: noninteractive
      TZ: Europe/Warsaw
    if: always()
    steps:
    - uses: actions/checkout@v2
    - name: Install gcp
      run: ./scripts/prepare_gcp.sh
    - name: Delete artifacts
      run: gsutil -m rm -r gs://gcp-distributed-job-test-bucket/job-artifacts
    - name: Update latest Zephyr commit
      id: update-last-zephyr-commit
      run: |
        ./scripts/save_commit.sh ${{ needs.simulate-0-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-0-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-1-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-2-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-3-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-4-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-5-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-6-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-7-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-8-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-9-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-10-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-11-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-12-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-13-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-14-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-15-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-16-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-17-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-18-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-19-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-20-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-21-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-22-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-23-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-24-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-25-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-26-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-27-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-28-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-hello_world.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-shell_module.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-philosophers.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-micropython.outputs.ZEPHYR_COMMIT }} ${{ needs.simulate-29-tensorflow_lite_micro.outputs.ZEPHYR_COMMIT }}
        echo "::set-output name=LAST_ZEPHYR_COMMIT::$(cat last_zephyr_commit)"
    - name: Commit latest Zephyr commit
      uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: Update latest Zephyr commit ${{ steps.update-last-zephyr-commit.outputs.LAST_ZEPHYR_COMMIT }}
        file_pattern: last_zephyr_commit